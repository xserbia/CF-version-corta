<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
  <title>Calculadora Financiera</title>
  <!-- ConexiÃ³n al CSS externo -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
<!-- ðŸ” NavegaciÃ³n superior -->
<div id="topNav" class="top-navigation">
  <button class="nav-btn active" onclick="irASeccion('stepIngresos')">Ingreso</button>
  <button id="btnGastos" class="nav-btn" onclick="validarAntesDeIrAGastos()" disabled>Gastos</button>
  <button id="btnActivos" class="nav-btn" onclick="validarAntesDeIrAActivos()" disabled>Activos</button>
</div>

<!-- ðŸ”¹ FORMULARIO: Step Ingresos -->
<div class="step active" id="stepIngresos">
  <fieldset>
    <legend>Ingresos y Ahorros</legend>

    <label for="ingreso_bruto">Ingreso anual bruto
      <span class="tooltip" data-tooltip="Suma total de ingresos antes de impuestos: salario, negocio, bonos, dividendos, rentas, etc.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="ingreso_bruto" name="ingreso_bruto" required onblur="validarCampo(this)">

    <label for="aporte_personal_retiro">Aporte personal a retiro
      <span class="tooltip" data-tooltip="Aporte que realizas de tu salario hacia tu fondo de retiro 401k, IRA, o similar.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="aporte_personal_retiro" name="aporte_personal_retiro" required onblur="validarCampo(this)">

    <label for="aporte_empleador_retiro">Aporte del empleador a retiro
      <span class="tooltip" data-tooltip="Aporte que tu empleador realiza a tu fondo de retiro, si aplica.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="aporte_empleador_retiro" name="aporte_empleador_retiro" required onblur="validarCampo(this)">

    <label for="otros_ahorros">Otros ahorros
      <span class="tooltip" data-tooltip="Cualquier otra forma de ahorro anual: ahorro bancario, fondos de emergencia, etc.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="otros_ahorros" name="otros_ahorros" required onblur="validarCampo(this)">
  </fieldset>
      <div class="nav-buttons">
      <button type="button" onclick="validarIngresoYActivarGastos()">Continuar</button>
    </div>
</div>
  
  <!-- 2. Gastos -->
<div class="step" id="stepGastos">
  <fieldset>
    <legend>Gastos Anuales</legend>

    <label for="pago_deudas">Pago por deudas
      <span class="tooltip" data-tooltip="Pagos anuales de hipotecas, prÃ©stamos personales, automotrices, educativos y tarjetas de crÃ©dito.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="pago_deudas" name="pago_deudas" required onblur="validarCampo(this)">

    <label for="gastos_diarios">Gastos diarios esenciales
      <span class="tooltip" data-tooltip="Incluye supermercado, transporte, servicios pÃºblicos, telecomunicaciones y mantenimiento bÃ¡sico.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="gastos_diarios" name="gastos_diarios" required onblur="validarCampo(this)">

    <label for="impuestos_anuales">Impuestos anuales
      <span class="tooltip" data-tooltip="Pagos de impuestos federales, estatales, municipales, de propiedad y de vehÃ­culo.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="impuestos_anuales" name="impuestos_anuales" required onblur="validarCampo(this)">

    <label for="seguros_anuales">Seguros anuales
      <span class="tooltip" data-tooltip="Pagos de seguros de salud, vida, propiedad, auto y umbrella.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="seguros_anuales" name="seguros_anuales" required onblur="validarCampo(this)">
  </fieldset>
      <div class="nav-buttons">
      <button type="button" onclick="validarGastosYActivarActivos()">Continuar</button>
    </div>
</div>

  <!-- 3. Activos -->
<div class="step" id="stepActivos">
  <fieldset>
    <legend>Activos</legend>

    <label for="efectivo_similar">Efectivo y similares
      <span class="tooltip" data-tooltip="Cuentas bancarias, efectivo, money market.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="efectivo_similar" name="efectivo_similar" required onblur="validarCampo(this)">

    <label for="cuentas_inversion">Cuentas de inversiÃ³n (no retiro)
      <span class="tooltip" data-tooltip="Fondos mutuos, acciones, bonos.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="cuentas_inversion" name="cuentas_inversion" required onblur="validarCampo(this)">

    <label for="cuentas_retiro">Cuentas de retiro
      <span class="tooltip" data-tooltip="401(k), IRA, Roth, etc.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="cuentas_retiro" name="cuentas_retiro" required onblur="validarCampo(this)">

    <label for="valor_propiedades">Propiedades
      <span class="tooltip" data-tooltip="Valor de tus viviendas o propiedades de inversiÃ³n.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="valor_propiedades" name="valor_propiedades" required onblur="validarCampo(this)">

    <label for="otros_activos">Otros activos
      <span class="tooltip" data-tooltip="Autos, joyas, arte, etc.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="otros_activos" name="otros_activos" required onblur="validarCampo(this)">

    <div class="nav-buttons">
      <button type="button" onclick="validarActivosYActivarPasivos()">Calcular</button>
    </div>
  </fieldset>
</div>

  <!-- 4. Pasivos -->
<div class="step" id="stepPasivos">
  <fieldset>
    <legend>Pasivos</legend>

    <label for="deuda_tarjetas">Deuda de tarjetas de crÃ©dito
      <span class="tooltip" data-tooltip="Saldo total actual de todas tus tarjetas de crÃ©dito.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="deuda_tarjetas" name="deuda_tarjetas" required onblur="validarCampo(this)">

    <label for="deuda_hipotecaria">Hipoteca o prÃ©stamo de vivienda
      <span class="tooltip" data-tooltip="Saldo pendiente de tu hipoteca principal o prÃ©stamo de vivienda.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="deuda_hipotecaria" name="deuda_hipotecaria" required onblur="validarCampo(this)">

    <label for="deuda_comercial">Deuda comercial
      <span class="tooltip" data-tooltip="Saldo actual de prÃ©stamos comerciales si eres dueÃ±o de un negocio.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="deuda_comercial" name="deuda_comercial" required onblur="validarCampo(this)">

    <label for="deuda_vehiculos">PrÃ©stamos de vehÃ­culos
      <span class="tooltip" data-tooltip="Saldo pendiente de tus prÃ©stamos de autos, motocicletas u otros vehÃ­culos.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="deuda_vehiculos" name="deuda_vehiculos" required onblur="validarCampo(this)">

    <label for="deuda_estudios">Deuda estudiantil
      <span class="tooltip" data-tooltip="Saldo restante de tus prÃ©stamos educativos o universitarios.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="deuda_estudios" name="deuda_estudios" required onblur="validarCampo(this)">

    <label for="deuda_otros">Otras deudas
      <span class="tooltip" data-tooltip="Cualquier otro saldo de deuda no clasificada anteriormente.">ðŸ›ˆ</span>
    </label>
    <input type="number" id="deuda_otros" name="deuda_otros" required onblur="validarCampo(this)">

  </fieldset>
  <div class="nav-buttons">
    <button type="button" onclick="mostrarResultadoPasivos()">Calcular</button>
  </div>
</div>

<!-- ðŸ”µ Contenedor de Resultados -->
  <div id="navResultados">
  <button class="nav-btn" onclick="mostrarResultado('resA')">ðŸ…° Liquidez</button>
  <button class="nav-btn" onclick="mostrarResultado('resB')">ðŸ…± Deuda</button>
  <button class="nav-btn" onclick="mostrarResultado('resC')">ðŸ…² Patrimonio Neto</button>
  <button class="nav-btn" onclick="mostrarResultado('resD')">ðŸ…³ Seguridad Financiera</button>

</div>
<!-- ðŸ§¾ Contenedor de resultados -->
<div id="resultadosContainer" style="display: block;">
  <h2>ðŸ§® Resultado Calculado</h2>

  <!-- ðŸ…° Ingresos -->
  <div id="resA" class="resultado-categoria mostrar">
    <p>âœ… Este es el resultado A: Liquidez</p>
  </div>

  <!-- ðŸ…± Gastos -->
  <div id="resB" class="resultado-categoria">
    <p>ðŸ“˜ Este es el resultado B: Deuda</p>
  </div>

  <!-- ðŸ…² Activos -->
  <div id="resC" class="resultado-categoria">
    <p>ðŸ’° Este es el resultado C: Patrimonio Neto</p>
  </div>
  
  <!-- ðŸ…³ Pasivos -->
<div id="resD" class="resultado-categoria">
  <p>ðŸ“‰ Este es el resultado D: Pasivos</p>
</div>
  
<script>
  // âœ… Navegar entre secciones del formulario
  function irASeccion(id) {
    const pasos = document.querySelectorAll(".step");
    pasos.forEach(p => p.classList.remove("active"));
    const pasoActual = document.getElementById(id);
    if (pasoActual) pasoActual.classList.add("active");

    const botones = document.querySelectorAll(".nav-btn");
    botones.forEach(b => b.classList.remove("active"));
    const botonActivo = Array.from(botones).find(b => b.getAttribute("onclick")?.includes(id));
    if (botonActivo) botonActivo.classList.add("active");
  }

  // âœ… ValidaciÃ³n visual individual
  function validarCampo(input) {
    const valor = parseFloat(input.value);
    if (isNaN(valor) || valor < 0) {
      input.style.borderColor = "red";
    } else {
      input.style.borderColor = "#44008f";
    }
  }

  // âœ… Validar ingreso y activar botÃ³n "Gastos"
  function validarIngresoYActivarGastos() {
    const campos = [
      "ingreso_bruto",
      "aporte_personal_retiro",
      "aporte_empleador_retiro",
      "otros_ahorros"
    ];

    let validos = true;

    campos.forEach(id => {
      const input = document.getElementById(id);
      const valor = parseFloat(input.value);
      if (isNaN(valor) || valor < 0) {
        input.classList.add("shake");
        input.style.borderColor = "red";
        validos = false;
        setTimeout(() => input.classList.remove("shake"), 300);
      } else {
        input.style.borderColor = "#44008f";
      }
    });

    if (validos) {
      document.getElementById("btnGastos").disabled = false;
    }
  }

  // âœ… Validar gastos y activar botÃ³n "Activos"
  function validarGastosYActivarActivos() {
    const campos = [
      "pago_deudas",
      "gastos_diarios",
      "impuestos_anuales",
      "seguros_anuales"
    ];

    let validos = true;

    campos.forEach(id => {
      const input = document.getElementById(id);
      const valor = parseFloat(input.value);
      if (isNaN(valor) || valor < 0) {
        input.classList.add("shake");
        input.style.borderColor = "red";
        validos = false;
        setTimeout(() => input.classList.remove("shake"), 300);
      } else {
        input.style.borderColor = "#44008f";
      }
    });

    if (validos) {
      document.getElementById("btnActivos").disabled = false;
    }
  }

  // âœ… Validar activos y activar botÃ³n "Pasivos"
  function validarActivosYActivarPasivos() {
    const campos = [
      "efectivo_similar",
      "cuentas_inversion",
      "cuentas_retiro",
      "valor_propiedades",
      "otros_activos"
    ];

    let validos = true;

    campos.forEach(id => {
      const input = document.getElementById(id);
      const valor = parseFloat(input.value);
      if (isNaN(valor) || valor < 0) {
        input.classList.add("shake");
        input.style.borderColor = "red";
        validos = false;
        setTimeout(() => input.classList.remove("shake"), 300);
      } else {
        input.style.borderColor = "#44008f";
      }
    });

    if (validos) {
      document.getElementById("btnPasivos").disabled = false;
    }
  }

  // âœ… Mostrar resultados por pestaÃ±as
  function mostrarResultado(id) {
    const secciones = document.querySelectorAll(".resultado-categoria");
    secciones.forEach(s => s.classList.remove("mostrar"));

    const activa = document.getElementById(id);
    if (activa) activa.classList.add("mostrar");

    // Estilo visual activo
    const botones = document.querySelectorAll("#navResultados .nav-btn");
    botones.forEach(b => b.classList.remove("resultado-activo"));

    const botonActivo = Array.from(botones).find(b => b.getAttribute("onclick")?.includes(id));
    if (botonActivo) botonActivo.classList.add("resultado-activo");
  }

  // âœ… Validar desde top nav si puede entrar a siguiente secciÃ³n
  function validarAntesDeIrAGastos() {
    const campos = [
      "ingreso_bruto",
      "aporte_personal_retiro",
      "aporte_empleador_retiro",
      "otros_ahorros"
    ];

    let completado = true;

    campos.forEach(id => {
      const input = document.getElementById(id);
      const valor = parseFloat(input.value);
      if (isNaN(valor) || valor < 0) {
        input.classList.add("shake");
        input.style.borderColor = "red";
        completado = false;
        setTimeout(() => input.classList.remove("shake"), 300);
      }
    });

    if (completado) irASeccion("stepGastos");
  }

  function validarAntesDeIrAActivos() {
    const campos = [
      "pago_deudas",
      "gastos_diarios",
      "impuestos_anuales",
      "seguros_anuales"
    ];

    let completado = true;

    campos.forEach(id => {
      const input = document.getElementById(id);
      const valor = parseFloat(input.value);
      if (isNaN(valor) || valor < 0) {
        input.classList.add("shake");
        input.style.borderColor = "red";
        completado = false;
        setTimeout(() => input.classList.remove("shake"), 300);
      }
    });

    if (completado) irASeccion("stepActivos");
  }

  function validarAntesDeIrAPasivos() {
    const campos = [
      "efectivo_similar",
      "cuentas_inversion",
      "cuentas_retiro",
      "valor_propiedades",
      "otros_activos"
    ];

    let completado = true;

    campos.forEach(id => {
      const input = document.getElementById(id);
      const valor = parseFloat(input.value);
      if (isNaN(valor) || valor < 0) {
        input.classList.add("shake");
        input.style.borderColor = "red";
        completado = false;
        setTimeout(() => input.classList.remove("shake"), 300);
      }
    });

    if (completado) irASeccion("stepPasivos");
  }

  // âœ… Mostrar resultado de PASIVOS
  function mostrarResultadoPasivos() {
    const campos = [
      "deuda_tarjetas",
      "deuda_hipotecaria",
      "deuda_comercial",
      "deuda_vehiculos",
      "deuda_estudios",
      "deuda_otros"
    ];

    let validos = true;

    campos.forEach(id => {
      const input = document.getElementById(id);
      const valor = parseFloat(input.value);
      if (isNaN(valor) || valor < 0) {
        input.classList.add("shake");
        input.style.borderColor = "red";
        validos = false;
        setTimeout(() => input.classList.remove("shake"), 300);
      } else {
        input.style.borderColor = "#44008f";
      }
    });

    if (!validos) return;

    const tarjeta = parseFloat(document.getElementById("deuda_tarjetas").value) || 0;
    const hipoteca = parseFloat(document.getElementById("deuda_hipotecaria").value) || 0;
    const comercial = parseFloat(document.getElementById("deuda_comercial").value) || 0;
    const vehiculo = parseFloat(document.getElementById("deuda_vehiculos").value) || 0;
    const estudio = parseFloat(document.getElementById("deuda_estudios").value) || 0;
    const otros = parseFloat(document.getElementById("deuda_otros").value) || 0;
    const total = tarjeta + hipoteca + comercial + vehiculo + estudio + otros;

    const html = `
      <h4>ðŸ“‰ Deudas Totales</h4>
      <p><strong>Tarjetas de crÃ©dito:</strong> $${tarjeta.toLocaleString()}</p>
      <p><strong>Hipoteca:</strong> $${hipoteca.toLocaleString()}</p>
      <p><strong>Deuda comercial:</strong> $${comercial.toLocaleString()}</p>
      <p><strong>VehÃ­culos:</strong> $${vehiculo.toLocaleString()}</p>
      <p><strong>Estudios:</strong> $${estudio.toLocaleString()}</p>
      <p><strong>Otras deudas:</strong> $${otros.toLocaleString()}</p>
      <p><strong>Total pasivos:</strong> $${total.toLocaleString()}</p>
    `;

    document.getElementById("resD").innerHTML = html;
    document.getElementById("resultadosContainer").style.display = "block";
    mostrarResultado("resD");

    // (Opcional) Activar siguiente botÃ³n
    // document.getElementById("btnSeguros").disabled = false;
  }

  // âœ… Al cargar
  document.addEventListener("DOMContentLoaded", () => {
    irASeccion("stepIngresos");
  });
</script>


</body>
</html>
